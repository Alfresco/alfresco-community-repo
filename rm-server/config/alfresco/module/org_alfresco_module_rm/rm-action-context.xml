<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE beans PUBLIC '-//SPRING//DTD BEAN//EN' 'http://www.springframework.org/dtd/spring-beans.dtd'>

<beans>

   <!-- I18N -->
   <bean id="rmActionResourceBundles" class="org.alfresco.i18n.ResourceBundleBootstrapComponent">
      <property name="resourceBundles">
         <list>
            <value>alfresco.module.org_alfresco_module_rm.messages.rm-actions</value>
         </list>
      </property>
   </bean>

   <!--  Action parameter constraints -->
   <bean id="rm-ac-is-kind-kinds" class="org.alfresco.module.org_alfresco_module_rm.action.constraint.CustomParameterConstraint" parent="action-constraint">
      <property name="parameterValues">
         <list>
            <value>RECORD_CATEGORY</value>
            <value>RECORD_FOLDER</value>
            <value>RECORD</value>
         </list>
      </property>
   </bean>

   <bean id="rm-ac-disposition-action-relative-positions" class="org.alfresco.repo.action.constraint.EnumParameterConstraint" parent="action-constraint">
      <property name="enumClassName" value="org.alfresco.module.org_alfresco_module_rm.action.evaluator.DispositionActionRelativePositions" />
   </bean>

   <bean id="rm-ac-disposition-actions" class="org.alfresco.module.org_alfresco_module_rm.action.constraint.DispositionActionParameterConstraint" parent="action-constraint">
      <property name="recordsManagementActionService" ref="RecordsManagementActionService"/>
   </bean>

   <bean id="rm-ac-record-types" class="org.alfresco.module.org_alfresco_module_rm.action.constraint.RecordTypeParameterConstraint" parent="action-constraint">
      <property name="recordService" ref="RecordService"/>
      <property name="dictionaryService" ref="DictionaryService"/>
      <property name="filePlanService" ref="FilePlanService" />
   </bean>

   <bean id="rm-ac-manual-events" class="org.alfresco.module.org_alfresco_module_rm.action.constraint.ManualEventParameterConstraint" parent="action-constraint">
      <property name="recordsManagementEventService" ref="RecordsManagementEventService"/>
   </bean>

   <bean id="rm-ac-scripts" class="org.alfresco.repo.action.constraint.FolderContentsParameterConstraint" parent="action-constraint">
      <property name="dictionaryService" ref="DictionaryService"/>
      <property name="searchService" ref="SearchService"/>
      <property name="nodeService" ref="NodeService"/>
      <property name="namespaceService" ref="NamespaceService" />
      <property name="repository" ref="repositoryHelper" />
      <property name="searchPath" value="/app:company_home/app:dictionary/cm:records_management/cm:records_management_scripts"/>
      <property name="cacheAllowableValues" value="false" />
      <property name="nodeInclusionFilter">
         <list>
            <value>js</value>
         </list>
      </property>
   </bean>

   <!--  Conditions -->
   <bean id="rmCapabilityConditionEvaluator"
         parent="action-condition-evaluator"
         abstract="true"
         class="org.alfresco.module.org_alfresco_module_rm.action.evaluator.CapabilityConditionEvaluator">
      <property name="recordsManagementActionService" ref="RecordsManagementActionService" />
      <property name="retryingTransactionHelper" ref="retryingTransactionHelper" />
   </bean>

   <bean id="isKind"
         parent="action-condition-evaluator"
         class="org.alfresco.module.org_alfresco_module_rm.action.evaluator.IsKindEvaluator">
      <property name="recordsManagementActionService" ref="RecordsManagementActionService" />
      <property name="retryingTransactionHelper" ref="retryingTransactionHelper" />
      <property name="filePlanService" ref="FilePlanService" />
   </bean>

   <bean id="hasDispositionAction"
         parent="action-condition-evaluator"
         class="org.alfresco.module.org_alfresco_module_rm.action.evaluator.HasDispositionActionEvaluator">
      <property name="recordsManagementActionService" ref="RecordsManagementActionService" />
      <property name="retryingTransactionHelper" ref="retryingTransactionHelper" />
      <property name="dispositionService" ref="DispositionService" />
   </bean>

   <bean id="isRecordType"
         parent="action-condition-evaluator"
         class="org.alfresco.module.org_alfresco_module_rm.action.evaluator.IsRecordTypeEvaluator">
      <property name="recordsManagementActionService" ref="RecordsManagementActionService" />
      <property name="retryingTransactionHelper" ref="retryingTransactionHelper" />
      <property name="nodeService" ref="NodeService" />
   </bean>

   <bean id="isCutoff" parent="rmCapabilityConditionEvaluator">
      <property name="capabilityCondition" ref="capabilityCondition.cutoff"/>
   </bean>

   <bean id="isClassified" parent="rmCapabilityConditionEvaluator">
      <property name="capabilityCondition" ref="capabilityCondition.isClassified"/>
   </bean>

   <bean id="isDeclared" parent="rmCapabilityConditionEvaluator">
      <property name="capabilityCondition" ref="capabilityCondition.declared"/>
   </bean>

   <bean id="isFrozen" parent="rmCapabilityConditionEvaluator">
      <property name="capabilityCondition" ref="capabilityCondition.frozen"/>
   </bean>

   <bean id="isRecordFiled" parent="rmCapabilityConditionEvaluator">
   	  <property name="capabilityCondition" ref="capabilityCondition.recordFiled"/>
   </bean>

   <bean id="isRecordFolderClosed" parent="rmCapabilityConditionEvaluator">
   	  <property name="capabilityCondition" ref="capabilityCondition.closed"/>
   </bean>

   <bean id="isVital" parent="rmCapabilityConditionEvaluator">
      <property name="capabilityCondition" ref="capabilityCondition.vitalRecordOrFolder"/>
   </bean>

   <!-- Actions -->

   <bean id="rmAction" parent="action-executer" abstract="true">
      <property name="namespaceService" ref="namespaceService"/>
      <property name="transactionService" ref="transactionService"/>
      <property name="nodeService" ref="nodeService"/>
      <property name="contentService" ref="contentService"/>
      <property name="dictionaryService" ref="dictionaryService"/>
      <property name="actionService" ref="actionService"/>
      <property name="recordsManagementAuditService" ref="recordsManagementAuditService"/>
      <property name="recordsManagementAdminService" ref="recordsManagementAdminService"/>
      <property name="recordsManagementActionService" ref="recordsManagementActionService"/>
      <property name="dispositionService" ref="dispositionService"/>
      <property name="vitalRecordService" ref="vitalRecordService"/>
      <property name="recordsManagementEventService" ref="recordsManagementEventService"/>
      <property name="publicAction" value="false"/>
      <property name="ownableService" ref="ownableService"/>
      <property name="freezeService" ref="freezeService"/>
      <property name="recordService" ref="recordService"/>
      <property name="parameterProcessorComponent" ref="parameterProcessorComponent"/>
      <property name="modelSecurityService" ref="modelSecurityService" />
      <property name="recordFolderService" ref="RecordFolderService" />
      <property name="holdService" ref="HoldService" />
   </bean>

   <bean id="rmProxyAction"
         class="org.alfresco.module.org_alfresco_module_rm.capability.RMActionProxyFactoryBean"
         init-method="registerAction"
         abstract="true">
      <property name="runtimeActionService" ref="actionService"/>
      <property name="recordsManagementActionService" ref="recordsManagementActionService"/>
      <property name="recordsManagementAuditService" ref="recordsManagementAuditService"/>
      <property name="proxyInterfaces">
         <list>
            <value>org.alfresco.module.org_alfresco_module_rm.action.RecordsManagementAction</value>
            <value>org.alfresco.repo.action.executer.ActionExecuter</value>
         </list>
      </property>
   </bean>

   <bean id="actionSecurity" abstract="true" class="org.alfresco.module.org_alfresco_module_rm.security.RMMethodSecurityInterceptor">
      <property name="authenticationManager">
         <ref bean="authenticationManager"/>
      </property>
      <property name="accessDecisionManager">
         <ref bean="accessDecisionManager"/>
      </property>
      <property name="afterInvocationManager">
         <ref bean="afterInvocationManager"/>
      </property>
   </bean>

   <bean id="actionProxy" abstract="true"/>

   <!--  Base security intercepter bean for action 'allow' -->
   <bean id="allow_security" parent="actionSecurity">
      <property name="objectDefinitionSource">
         <value>
            org.alfresco.module.org_alfresco_module_rm.action.RecordsManagementAction.execute=RM_ALLOW
            org.alfresco.module.org_alfresco_module_rm.action.RecordsManagementAction.*=RM_ALLOW
            org.alfresco.repo.action.executer.ActionExecuter.*=RM_ALLOW
         </value>
      </property>
   </bean>

    <!-- Cutoff action -->

   <bean id="cutoff_proxy" parent="rmProxyAction" >
      <property name="target">
         <ref bean="cutoff"/>
      </property>
      <property name="interceptorNames">
         <list>
            <idref bean="cutoff_security"/>
         </list>
      </property>
   </bean>

   <bean id="cutoff_security" parent="actionSecurity">
      <property name="objectDefinitionSource">
         <value>
            org.alfresco.module.org_alfresco_module_rm.action.RecordsManagementAction.execute=RM_CAP.0.rma:filePlanComponent.ApproveRecordsScheduledForCutoff
            org.alfresco.module.org_alfresco_module_rm.action.RecordsManagementAction.*=RM_ALLOW
            org.alfresco.repo.action.executer.ActionExecuter.*=RM_ALLOW
         </value>
      </property>
   </bean>

   <bean id="cutoff" class="org.alfresco.module.org_alfresco_module_rm.action.impl.CutOffAction" parent="rmAction"/>

   <!-- UnCutoff action -->

   <bean id="unCutoff_proxy" parent="rmProxyAction">
      <property name="target">
         <ref bean="unCutoff"/>
      </property>
      <property name="interceptorNames">
         <list>
            <idref bean="unCutoff_security"/>
         </list>
      </property>
   </bean>

   <bean id="unCutoff_security" parent="actionSecurity">
      <property name="objectDefinitionSource">
         <value>
            org.alfresco.module.org_alfresco_module_rm.action.RecordsManagementAction.execute=RM_CAP.0.rma:filePlanComponent.ApproveRecordsScheduledForCutoff
            org.alfresco.module.org_alfresco_module_rm.action.RecordsManagementAction.*=RM_ALLOW
            org.alfresco.repo.action.executer.ActionExecuter.*=RM_ALLOW
         </value>
      </property>
   </bean>

   <bean id="unCutoff" class="org.alfresco.module.org_alfresco_module_rm.action.impl.UnCutoffAction" parent="rmAction" />

   <!-- Destroy -->

   <bean id="destroy_proxy" parent="rmProxyAction" >
      <property name="target">
         <ref bean="destroy"/>
      </property>
      <property name="interceptorNames">
         <list>
            <idref bean="destroy_security"/>
         </list>
      </property>
   </bean>

   <bean id="destroy_security" parent="actionSecurity">
      <property name="objectDefinitionSource">
         <value>
            org.alfresco.module.org_alfresco_module_rm.action.RecordsManagementAction.execute=RM_CAP.0.rma:filePlanComponent.Destroy
            org.alfresco.module.org_alfresco_module_rm.action.RecordsManagementAction.*=RM_ALLOW
            org.alfresco.repo.action.executer.ActionExecuter.*=RM_ALLOW
         </value>
      </property>
   </bean>

   <bean id="destroy" class="org.alfresco.module.org_alfresco_module_rm.action.impl.DestroyAction" parent="rmAction"
         depends-on="rmDestroyRecordsScheduledForDestructionCapability">
      <property name="capabilityService" ref="CapabilityService" />
      <property name="eagerContentStoreCleaner" ref="eagerContentStoreCleaner"/>
      <property name="ghostingEnabled">
         <value>${rm.ghosting.enabled}</value>
      </property>
   </bean>

   <!-- retain -->
   <!-- No permission?? : allow -->

   <bean id="retain_proxy" parent="rmProxyAction" >
      <property name="target">
       	<ref bean="retain"/>
      </property>
      <property name="interceptorNames">
         <list>
            <idref bean="allow_security"/>
         </list>
      </property>
   </bean>

   <bean id="retain" class="org.alfresco.module.org_alfresco_module_rm.action.impl.RetainAction" parent="rmAction"/>

   <!-- open record folder -->

   <bean id="openRecordFolder_proxy" parent="rmProxyAction" >
      <property name="target">
         <ref bean="openRecordFolder"/>
      </property>
      <property name="interceptorNames">
         <list>
            <idref bean="openRecordFolder_security"/>
         </list>
      </property>
   </bean>

   <bean id="openRecordFolder_security" parent="actionSecurity">
      <property name="objectDefinitionSource">
         <value>
            org.alfresco.module.org_alfresco_module_rm.action.RecordsManagementAction.execute=RM_CAP.0.rma:filePlanComponent.ReOpenFolders
            org.alfresco.module.org_alfresco_module_rm.action.RecordsManagementAction.*=RM_ALLOW
            org.alfresco.repo.action.executer.ActionExecuter.*=RM_ALLOW
         </value>
      </property>
   </bean>

   <bean id="openRecordFolder" class="org.alfresco.module.org_alfresco_module_rm.action.impl.OpenRecordFolderAction" parent="rmAction">
      <property name="publicAction" value="true"/>
   </bean>

   <!-- close record folder -->

   <bean id="closeRecordFolder_proxy" parent="rmProxyAction" >
      <property name="target">
         <ref bean="closeRecordFolder"/>
      </property>
      <property name="interceptorNames">
         <list>
            <idref bean="closeRecordFolder_security"/>
         </list>
      </property>
   </bean>

   <bean id="closeRecordFolder_security" parent="actionSecurity">
      <property name="objectDefinitionSource">
         <value>
            org.alfresco.module.org_alfresco_module_rm.action.RecordsManagementAction.execute=RM_CAP.0.rma:filePlanComponent.CloseFolders
            org.alfresco.module.org_alfresco_module_rm.action.RecordsManagementAction.*=RM_ALLOW
            org.alfresco.repo.action.executer.ActionExecuter.*=RM_ALLOW
         </value>
      </property>
   </bean>

   <bean id="closeRecordFolder" class="org.alfresco.module.org_alfresco_module_rm.action.impl.CloseRecordFolderAction" parent="rmAction">
      <property name="publicAction" value="true"/>
   </bean>

   <!-- reviewed -->

   <bean id="reviewed_proxy" parent="rmProxyAction" >
      <property name="target">
         <ref bean="reviewed"/>
      </property>
      <property name="interceptorNames">
         <list>
            <idref bean="reviewed_security"/>
         </list>
      </property>
   </bean>

   <bean id="reviewed_security" parent="actionSecurity">
      <property name="objectDefinitionSource">
         <value>
            org.alfresco.module.org_alfresco_module_rm.action.RecordsManagementAction.execute=RM_CAP.0.rma:filePlanComponent.CycleVitalRecords
            org.alfresco.module.org_alfresco_module_rm.action.RecordsManagementAction.*=RM_ALLOW
            org.alfresco.repo.action.executer.ActionExecuter.*=RM_ALLOW
         </value>
      </property>
   </bean>

   <bean id="reviewed" class="org.alfresco.module.org_alfresco_module_rm.vital.ReviewedAction" parent="rmAction" depends-on="rmCycleVitalRecordsCapability" />

   <!-- declare record -->

   <bean id="declareRecord_proxy" parent="rmProxyAction" >
      <property name="target">
         <ref bean="declareRecord"/>
      </property>
      <property name="interceptorNames">
         <list>
            <idref bean="declareRecord_security"/>
         </list>
      </property>
   </bean>

   <bean id="declareRecord_security" parent="actionSecurity">
      <property name="objectDefinitionSource">
         <value>
            org.alfresco.module.org_alfresco_module_rm.action.RecordsManagementAction.execute=RM.Declare.0
            org.alfresco.module.org_alfresco_module_rm.action.RecordsManagementAction.*=RM_ALLOW
            org.alfresco.repo.action.executer.ActionExecuter.*=RM_ALLOW
         </value>
      </property>
   </bean>

   <bean id="declareRecord" class="org.alfresco.module.org_alfresco_module_rm.action.impl.DeclareRecordAction" parent="rmAction">
      <property name="publicAction" value="true"/>
      <property name="checkMandatoryPropertiesEnabled" value="${rm.completerecord.mandatorypropertiescheck.enabled}"/>
   </bean>

   <!-- undeclare record -->

   <bean id="undeclareRecord_proxy" parent="rmProxyAction" >
      <property name="target">
         <ref bean="undeclareRecord"/>
      </property>
      <property name="interceptorNames">
         <list>
            <idref bean="undeclareRecord_security"/>
         </list>
      </property>
   </bean>

   <bean id="undeclareRecord_security" parent="actionSecurity">
      <property name="objectDefinitionSource">
         <value>
            org.alfresco.module.org_alfresco_module_rm.action.RecordsManagementAction.execute=RM_CAP.0.rma:filePlanComponent.UndeclareRecords
            org.alfresco.module.org_alfresco_module_rm.action.RecordsManagementAction.*=RM_ALLOW
            org.alfresco.repo.action.executer.ActionExecuter.*=RM_ALLOW
         </value>
      </property>
   </bean>

   <bean id="undeclareRecord" class="org.alfresco.module.org_alfresco_module_rm.action.impl.UndeclareRecordAction" parent="rmAction">
      <property name="publicAction" value="true"/>
   </bean>

   <!-- Edit review as of date -->

   <bean id="editReviewAsOfDate_proxy" parent="rmProxyAction" >
      <property name="target">
         <ref bean="editReviewAsOfDate"/>
      </property>
      <property name="interceptorNames">
         <list>
            <idref bean="editReviewAsOfDate_security"/>
         </list>
      </property>
   </bean>

   <bean id="editReviewAsOfDate_security" parent="actionSecurity">
      <property name="objectDefinitionSource">
         <value>
            org.alfresco.module.org_alfresco_module_rm.action.RecordsManagementAction.execute=RM_CAP.0.rma:filePlanComponent.PlanningReviewCycles
            org.alfresco.module.org_alfresco_module_rm.action.RecordsManagementAction.*=RM_ALLOW
            org.alfresco.repo.action.executer.ActionExecuter.*=RM_ALLOW
         </value>
      </property>
   </bean>

   <bean id="editReviewAsOfDate" class="org.alfresco.module.org_alfresco_module_rm.action.impl.EditReviewAsOfDateAction" parent="rmAction" />

   <!-- Edit disposition action as of date -->

   <bean id="editDispositionActionAsOfDate_proxy" parent="rmProxyAction" >
      <property name="target">
         <ref bean="editDispositionActionAsOfDate"/>
      </property>
      <property name="interceptorNames">
         <list>
            <idref bean="editDispositionActionAsOfDate_security"/>
         </list>
      </property>
   </bean>

   <bean id="editDispositionActionAsOfDate_security" parent="actionSecurity">
      <property name="objectDefinitionSource">
         <value>
            org.alfresco.module.org_alfresco_module_rm.action.RecordsManagementAction.execute=RM_CAP.0.rma:filePlanComponent.ManuallyChangeDispositionDates
            org.alfresco.module.org_alfresco_module_rm.action.RecordsManagementAction.*=RM_ALLOW
            org.alfresco.repo.action.executer.ActionExecuter.*=RM_ALLOW
         </value>
      </property>
   </bean>

   <bean id="editDispositionActionAsOfDate" class="org.alfresco.module.org_alfresco_module_rm.action.impl.EditDispositionActionAsOfDateAction" parent="rmAction" />

   <!-- broadcast vital record definition -->
   <!-- bound to policy: allow -->

   <bean id="broadcastVitalRecordDefinition_proxy" parent="rmProxyAction" >
      <property name="target">
         <ref bean="broadcastVitalRecordDefinition"/>
      </property>
      <property name="interceptorNames">
         <list>
            <idref bean="broadcastVitalRecordDefinition_security"/>
         </list>
      </property>
   </bean>

   <bean id="broadcastVitalRecordDefinition_security" parent="actionSecurity">
      <property name="objectDefinitionSource">
         <value>
            org.alfresco.module.org_alfresco_module_rm.action.RecordsManagementAction.execute=RM_ALLOW
            org.alfresco.module.org_alfresco_module_rm.action.RecordsManagementAction.*=RM_ALLOW
            org.alfresco.repo.action.executer.ActionExecuter.*=RM_ALLOW
         </value>
      </property>
   </bean>

   <bean id="broadcastVitalRecordDefinition"
         class="org.alfresco.module.org_alfresco_module_rm.vital.BroadcastVitalRecordDefinitionAction"
         parent="rmAction">
      <property name="filePlanService" ref="FilePlanService"/>
      <property name="auditable" value="false"/>
   </bean>

   <!-- broadcast disposition action definition update -->
   <!-- bound to policy: allow -->

   <bean id="broadcastDispositionActionDefinitionUpdate_proxy" parent="rmProxyAction" >
      <property name="target">
         <ref bean="broadcastDispositionActionDefinitionUpdate"/>
      </property>
      <property name="interceptorNames">
         <list>
            <idref bean="broadcastDispositionActionDefinitionUpdate_security"/>
         </list>
      </property>
   </bean>

   <bean id="broadcastDispositionActionDefinitionUpdate_security"   parent="actionSecurity">
      <property name="objectDefinitionSource">
         <value>
            org.alfresco.module.org_alfresco_module_rm.action.RecordsManagementAction.execute=RM_ALLOW
            org.alfresco.module.org_alfresco_module_rm.action.RecordsManagementAction.*=RM_ALLOW
            org.alfresco.repo.action.executer.ActionExecuter.*=RM_ALLOW
         </value>
      </property>
   </bean>

   <bean id="broadcastDispositionActionDefinitionUpdate"
         class="org.alfresco.module.org_alfresco_module_rm.action.impl.BroadcastDispositionActionDefinitionUpdateAction"
         parent="rmAction" >
      <property name="behaviourFilter" ref="policyBehaviourFilter"/>
      <property name="auditable" value="false"/>
   </bean>


   <!-- complete event -->

   <bean id="completeEvent_proxy" parent="rmProxyAction" >
      <property name="target">
         <ref bean="completeEvent"/>
      </property>
      <property name="interceptorNames">
         <list>
            <idref bean="completeEvent_security"/>
         </list>
      </property>
   </bean>

   <bean id="completeEvent_security"   parent="actionSecurity">
      <property name="objectDefinitionSource">
         <value>
            org.alfresco.module.org_alfresco_module_rm.action.RecordsManagementAction.execute=RM_CAP.0.rma:filePlanComponent.AddModifyEventDates
            org.alfresco.module.org_alfresco_module_rm.action.RecordsManagementAction.*=RM_ALLOW
            org.alfresco.repo.action.executer.ActionExecuter.*=RM_ALLOW
         </value>
      </property>
   </bean>

   <bean id="completeEvent" class="org.alfresco.module.org_alfresco_module_rm.action.impl.CompleteEventAction" parent="rmAction">
      <property name="publicAction" value="true"/>
   </bean>

   <!-- undo event -->

   <bean id="undoEvent_proxy" parent="rmProxyAction" >
      <property name="target">
         <ref bean="undoEvent"/>
      </property>
      <property name="interceptorNames">
         <list>
            <idref bean="undoEvent_security"/>
         </list>
      </property>
   </bean>

   <bean id="undoEvent_security"   parent="actionSecurity">
      <property name="objectDefinitionSource">
         <value>
            org.alfresco.module.org_alfresco_module_rm.action.RecordsManagementAction.execute=RM_CAP.0.rma:filePlanComponent.AddModifyEventDates
            org.alfresco.module.org_alfresco_module_rm.action.RecordsManagementAction.*=RM_ALLOW
            org.alfresco.repo.action.executer.ActionExecuter.*=RM_ALLOW
         </value>
      </property>
   </bean>

   <bean id="undoEvent" class="org.alfresco.module.org_alfresco_module_rm.action.impl.UndoEventAction" parent="rmAction">
   </bean>

   <!-- transfer -->

   <bean id="transfer_proxy" parent="rmProxyAction" >
      <property name="target">
         <ref bean="transfer"/>
      </property>
      <property name="interceptorNames">
         <list>
            <idref bean="transfer_security"/>
         </list>
      </property>
   </bean>

   <bean id="transfer_security"   parent="actionSecurity">
      <property name="objectDefinitionSource">
         <value>
            org.alfresco.module.org_alfresco_module_rm.action.RecordsManagementAction.execute=RM_CAP.0.rma:filePlanComponent.AuthorizeAllTransfers
            org.alfresco.module.org_alfresco_module_rm.action.RecordsManagementAction.*=RM_ALLOW
            org.alfresco.repo.action.executer.ActionExecuter.*=RM_ALLOW
         </value>
      </property>
   </bean>

   <bean id="transfer" class="org.alfresco.module.org_alfresco_module_rm.action.impl.TransferAction" parent="rmAction">
      <property name="transferService" ref="RmTransferService" />
      <property name="isAccession" value="false"/>
   </bean>

   <!-- Transfer complete -->

   <bean id="transferComplete_proxy" parent="rmProxyAction" >
      <property name="target">
         <ref bean="transferComplete"/>
      </property>
      <property name="interceptorNames">
         <list>
            <idref bean="transfer_security"/>
         </list>
      </property>
   </bean>

   <bean id="transferComplete" class="org.alfresco.module.org_alfresco_module_rm.action.impl.TransferCompleteAction" parent="rmAction" >
      <property name="transferService" ref="RmTransferService" />
      <property name="auditedImmediately" value="true"/>
   </bean>

   <!-- accession -->

   <bean id="accession_proxy" parent="rmProxyAction" >
      <property name="target">
         <ref bean="accession"/>
      </property>
      <property name="interceptorNames">
         <list>
            <idref bean="accession_security"/>
         </list>
      </property>
   </bean>

   <bean id="accession_security"   parent="actionSecurity">
      <property name="objectDefinitionSource">
         <value>
            org.alfresco.module.org_alfresco_module_rm.action.RecordsManagementAction.execute=RM_CAP.0.rma:filePlanComponent.AuthorizeNominatedTransfers
            org.alfresco.module.org_alfresco_module_rm.action.RecordsManagementAction.*=RM_ALLOW
            org.alfresco.repo.action.executer.ActionExecuter.*=RM_ALLOW
         </value>
      </property>
   </bean>

   <bean id="accession" class="org.alfresco.module.org_alfresco_module_rm.action.impl.TransferAction" parent="rmAction">
      <property name="transferService" ref="RmTransferService" />
      <property name="isAccession" value="true"/>
   </bean>

   <!-- Accession complete -->

   <bean id="accessionComplete_proxy" parent="rmProxyAction" >
      <property name="target">
         <ref bean="accessionComplete"/>
      </property>
      <property name="interceptorNames">
         <list>
            <idref bean="accession_security"/>
         </list>
      </property>
   </bean>

   <bean id="accessionComplete" class="org.alfresco.module.org_alfresco_module_rm.action.impl.TransferCompleteAction" parent="rmAction">
      <property name="transferService" ref="RmTransferService" />
      <property name="auditedImmediately" value="true"/>
   </bean>

   <!-- Split Email -->

   <bean id="splitEmail_proxy" parent="rmProxyAction" >
      <property name="target" ref="splitEmail"/>
   </bean>

   <bean id="splitEmail" class="org.alfresco.module.org_alfresco_module_rm.action.impl.SplitEmailAction" parent="rmAction">
   </bean>

   <!--  Create disposition schedule -->

   <bean id="createDispositionSchedule_proxy" parent="rmProxyAction" >
      <property name="target" ref="createDispositionSchedule"/>
      <property name="interceptorNames">
         <list>
            <idref bean="createDispositionSchedule_security"/>
         </list>
      </property>
   </bean>

   <bean id="createDispositionSchedule_security"   parent="actionSecurity">
      <property name="objectDefinitionSource">
         <value>
            org.alfresco.module.org_alfresco_module_rm.action.RecordsManagementAction.execute=RM_CAP.0.rma:filePlanComponent.CreateModifyDestroyFileplanMetadata
            org.alfresco.module.org_alfresco_module_rm.action.RecordsManagementAction.*=RM_ALLOW
            org.alfresco.repo.action.executer.ActionExecuter.*=RM_ALLOW
         </value>
      </property>
   </bean>

   <bean id="createDispositionSchedule"
         class="org.alfresco.module.org_alfresco_module_rm.action.impl.CreateDispositionScheduleAction"
         parent="rmAction">
      <property name="filePlanService" ref="FilePlanService"/>
   </bean>

   <!-- Reject record -->

   <bean id="reject_proxy" parent="rmProxyAction" >
      <property name="target" ref="reject"/>
      <property name="interceptorNames">
         <list>
            <idref bean="reject_security"/>
         </list>
      </property>
   </bean>

   <bean id="reject_security"   parent="actionSecurity">
      <property name="objectDefinitionSource">
         <value>
            org.alfresco.module.org_alfresco_module_rm.action.RecordsManagementAction.execute=RM_CAP.0.rma:filePlanComponent.RejectRecords
            org.alfresco.module.org_alfresco_module_rm.action.RecordsManagementAction.*=RM_ALLOW
            org.alfresco.repo.action.executer.ActionExecuter.*=RM_ALLOW
         </value>
      </property>
   </bean>

   <bean id="reject" class="org.alfresco.module.org_alfresco_module_rm.action.impl.RejectAction" parent="rmAction">
      <property name="publicAction" value="true"/>
   </bean>

   <!--  File To -->

   <bean id="fileTo_proxy" parent="rmProxyAction">
      <property name="target" ref="fileTo"/>
        <property name="interceptorNames">
            <list>
               <idref bean="fileTo_security"/>
            </list>
         </property>
   </bean>

   <bean id="fileTo_security"   parent="actionSecurity">
      <property name="objectDefinitionSource">
         <value>
            org.alfresco.module.org_alfresco_module_rm.action.RecordsManagementAction.execute=RM_CAP.0.rma:filePlanComponent.FileUnfiledRecords
            org.alfresco.module.org_alfresco_module_rm.action.RecordsManagementAction.*=RM_ALLOW
            org.alfresco.repo.action.executer.ActionExecuter.*=RM_ALLOW
         </value>
      </property>
   </bean>

   <bean id="fileTo" class="org.alfresco.module.org_alfresco_module_rm.action.impl.FileToAction" parent="rmAction">
      <property name="fileFolderService" ref="FileFolderService"/>
      <property name="filePlanService" ref="FilePlanService" />
      <property name="publicAction" value="true"/>
      <property name="allowParameterSubstitutions" value="true"/>
      <property name="retryingTransactionHelper" ref="retryingTransactionHelper" />
   </bean>

   <!--  Copy To -->

   <bean id="copyTo_proxy" parent="rmProxyAction">
      <property name="target" ref="copyTo"/>
        <property name="interceptorNames">
            <list>
               <idref bean="copyTo_security"/>
            </list>
         </property>
   </bean>

   <bean id="copyTo_security"   parent="actionSecurity">
      <property name="objectDefinitionSource">
         <value>
            org.alfresco.module.org_alfresco_module_rm.action.RecordsManagementAction.execute=RM_CAP.0.rma:filePlanComponent.rmCopy
            org.alfresco.module.org_alfresco_module_rm.action.RecordsManagementAction.*=RM_ALLOW
            org.alfresco.repo.action.executer.ActionExecuter.*=RM_ALLOW
         </value>
      </property>
   </bean>

   <bean id="copyTo" class="org.alfresco.module.org_alfresco_module_rm.action.impl.CopyToAction" parent="rmAction">
      <property name="fileFolderService" ref="FileFolderService"/>
      <property name="filePlanService" ref="FilePlanService" />
      <property name="publicAction" value="true"/>
      <property name="allowParameterSubstitutions" value="true"/>
   </bean>

   <!--  Move To -->

   <bean id="moveTo_proxy" parent="rmProxyAction">
      <property name="target" ref="moveTo"/>
        <property name="interceptorNames">
            <list>
               <idref bean="moveTo_security"/>
            </list>
         </property>
   </bean>

   <bean id="moveTo_security"   parent="actionSecurity">
      <property name="objectDefinitionSource">
         <value>
            org.alfresco.module.org_alfresco_module_rm.action.RecordsManagementAction.execute=RM_CAP.0.rma:filePlanComponent.rmMove
            org.alfresco.module.org_alfresco_module_rm.action.RecordsManagementAction.*=RM_ALLOW
            org.alfresco.repo.action.executer.ActionExecuter.*=RM_ALLOW
         </value>
      </property>
   </bean>

   <bean id="moveTo" class="org.alfresco.module.org_alfresco_module_rm.action.impl.MoveToAction" parent="rmAction">
      <property name="fileFolderService" ref="FileFolderService"/>
      <property name="filePlanService" ref="FilePlanService" />
      <property name="publicAction" value="true"/>
      <property name="allowParameterSubstitutions" value="true"/>
   </bean>

   <!--  Link To -->

   <bean id="linkTo_proxy" parent="rmProxyAction">
      <property name="target" ref="linkTo"/>
        <property name="interceptorNames">
            <list>
               <idref bean="linkTo_security"/>
            </list>
         </property>
   </bean>

   <bean id="linkTo_security"   parent="actionSecurity">
      <property name="objectDefinitionSource">
         <value>
            org.alfresco.module.org_alfresco_module_rm.action.RecordsManagementAction.execute=RM_CAP.0.rma:filePlanComponent.LinkToRecords
            org.alfresco.module.org_alfresco_module_rm.action.RecordsManagementAction.*=RM_ALLOW
            org.alfresco.repo.action.executer.ActionExecuter.*=RM_ALLOW
         </value>
      </property>
   </bean>

   <bean id="linkTo" class="org.alfresco.module.org_alfresco_module_rm.action.impl.LinkToAction" parent="rmAction">
      <property name="fileFolderService" ref="FileFolderService"/>
      <property name="filePlanService" ref="FilePlanService" />
      <property name="publicAction" value="true"/>
      <property name="allowParameterSubstitutions" value="true"/>
   </bean>

    <!-- RequestInfo action -->

   <bean id="requestInfo_proxy" parent="rmProxyAction">
      <property name="target" ref="requestInfo"/>
      <property name="interceptorNames">
         <list>
            <idref bean="allow_security"/>
         </list>
      </property>
   </bean>

   <bean id="requestInfo" class="org.alfresco.module.org_alfresco_module_rm.action.impl.RequestInfoAction" parent="rmAction">
      <property name="publicAction" value="true"/>
      <property name="workflowService" ref="WorkflowService"/>
   </bean>

   <!-- ExecuteScript action -->

   <bean id="executeScript_proxy" class="org.alfresco.module.org_alfresco_module_rm.capability.RMActionProxyFactoryBean" parent="rmProxyAction" init-method="registerAction">
      <property name="target">
         <ref bean="executeScript"/>
      </property>
      <property name="interceptorNames">
         <list>
            <idref bean="allow_security"/>
         </list>
      </property>
   </bean>
   <bean id="executeScript" class="org.alfresco.module.org_alfresco_module_rm.action.impl.DelegateAction" parent="rmAction">
      <property name="publicAction" value="true"/>
      <property name="delegateAction" ref="rmscript" />
   </bean>
   <bean id="rmscript" class="org.alfresco.module.org_alfresco_module_rm.action.dm.ExecuteScriptAction" parent="script">
       <!-- The service registry is needed as ScriptAction needs it -->
       <property name="serviceRegistry">
           <ref bean="ServiceRegistry" />
       </property>
       <property name="personService">
           <ref bean="PersonService" />
       </property>
       <property name="storeUrl">
           <value>${spaces.store}</value>
       </property>
       <property name="companyHomePath">
           <value>/${spaces.company_home.childname}</value>
       </property>
       <property name="sysAdminParams">
           <ref bean="sysAdminParams" />
       </property>
       <property name="publicAction" value="false"/>
   </bean>

   <!-- Send email action -->

   <bean id="sendEmail_proxy" class="org.alfresco.module.org_alfresco_module_rm.capability.RMActionProxyFactoryBean" parent="rmProxyAction" init-method="registerAction">
      <property name="target">
         <ref bean="sendEmail"/>
      </property>
      <property name="interceptorNames">
         <list>
            <idref bean="allow_security"/>
         </list>
      </property>
   </bean>
   <bean id="sendEmail" class="org.alfresco.module.org_alfresco_module_rm.action.impl.DelegateAction" parent="rmAction">
      <property name="publicAction" value="true"/>
      <property name="delegateAction" ref="mail" />
   </bean>

   <!-- Set property value action -->

   <bean id="setProperty_proxy" class="org.alfresco.module.org_alfresco_module_rm.capability.RMActionProxyFactoryBean" parent="rmProxyAction" init-method="registerAction">
      <property name="target">
         <ref bean="setPropertyValue"/>
      </property>
      <property name="interceptorNames">
         <list>
            <idref bean="allow_security"/>
         </list>
      </property>
   </bean>
   <bean id="setPropertyValue" class="org.alfresco.module.org_alfresco_module_rm.action.impl.DelegateAction" parent="rmAction">
      <property name="publicAction" value="true"/>
      <property name="delegateAction" ref="set-property-value" />
      <property name="adhocPropertiesAllowed" value="true" />
      <property name="checkFrozen" value="true" />
      <property name="allowParameterSubstitutions" value="true" />
   </bean>

   <!-- add record types -->

   <bean id="addRecordTypes_proxy" parent="rmProxyAction" >
      <property name="target">
         <ref bean="addRecordTypes"/>
      </property>
      <property name="interceptorNames">
         <list>
            <idref bean="addRecordTypes_security"/>
         </list>
      </property>
   </bean>

   <bean id="addRecordTypes_security"   parent="actionSecurity">
      <property name="objectDefinitionSource">
         <value>
            org.alfresco.module.org_alfresco_module_rm.action.RecordsManagementAction.execute=RM_ALLOW
            org.alfresco.module.org_alfresco_module_rm.action.RecordsManagementAction.*=RM_ALLOW
            org.alfresco.repo.action.executer.ActionExecuter.*=RM_ALLOW
         </value>
      </property>
   </bean>

   <bean id="addRecordTypes" class="org.alfresco.module.org_alfresco_module_rm.action.impl.AddRecordTypeAction" parent="rmAction">
      <property name="publicAction" value="true"/>
   </bean>

   <!--  file report action -->

   <bean id="fileReport"
         class="org.alfresco.module.org_alfresco_module_rm.action.impl.FileReportAction"
         parent="rmAction">
      <property name="reportService" ref="ReportService" />
      <property name="capabilityService" ref="CapabilityService" />
      <property name="publicAction" value="false"/>
   </bean>

   <bean id="fileReport_proxy" parent="rmProxyAction" >
      <property name="target">
         <ref bean="fileReport"/>
      </property>
      <property name="interceptorNames">
         <list>
            <idref bean="fileReport_security"/>
         </list>
      </property>
   </bean>

   <bean id="fileReport_security"   parent="actionSecurity">
      <property name="objectDefinitionSource">
         <value>
            org.alfresco.module.org_alfresco_module_rm.action.RecordsManagementAction.execute=RM_ALLOW
            org.alfresco.module.org_alfresco_module_rm.action.RecordsManagementAction.*=RM_ALLOW
            org.alfresco.repo.action.executer.ActionExecuter.*=RM_ALLOW
         </value>
      </property>
   </bean>

   <bean id="deleteHold" class="org.alfresco.module.org_alfresco_module_rm.action.impl.DeleteHoldAction" parent="rmAction">
      <property name="auditedImmediately" value="true"/>
   </bean>

   <bean id="deleteHold_proxy" parent="rmProxyAction" >
      <property name="target">
         <ref bean="deleteHold"/>
      </property>
      <property name="interceptorNames">
         <list>
            <idref bean="deleteHold_security"/>
         </list>
      </property>
   </bean>

   <bean id="deleteHold_security" parent="actionSecurity">
      <property name="objectDefinitionSource">
         <value>
            org.alfresco.module.org_alfresco_module_rm.action.RecordsManagementAction.execute=RM_CAP.0.rma:filePlanComponent.DeleteHold
            org.alfresco.module.org_alfresco_module_rm.action.RecordsManagementAction.*=RM_ALLOW
            org.alfresco.repo.action.executer.ActionExecuter.*=RM_ALLOW
         </value>
      </property>
   </bean>

   <!--  @deprecated actions as of 2.2 -->
   <!--  actions can be reinstated by reconfiguring their publicity -->

   <!-- Freeze record -->

   <bean id="freeze_proxy" parent="rmProxyAction" >
      <property name="target">
         <ref bean="freeze"/>
      </property>
      <property name="interceptorNames">
         <list>
            <idref bean="freeze_security"/>
         </list>
      </property>
   </bean>

   <bean id="freeze_security" parent="actionSecurity">
      <property name="objectDefinitionSource">
         <value>
            org.alfresco.module.org_alfresco_module_rm.action.RecordsManagementAction.execute=RM_CAP.0.rma:filePlanComponent.ExtendRetentionPeriodOrFreeze
            org.alfresco.module.org_alfresco_module_rm.action.RecordsManagementAction.*=RM_ALLOW
            org.alfresco.repo.action.executer.ActionExecuter.*=RM_ALLOW
         </value>
      </property>
   </bean>

   <bean id="freeze" class="org.alfresco.module.org_alfresco_module_rm.action.impl.FreezeAction" parent="rmAction" depends-on="rmExtendRetentionPeriodOrFreezeCapability">
      <property name="publicAction" value="false"/>
      <property name="auditable" value="false"/>
   </bean>

   <!-- Unfreeze record -->

   <bean id="unfreeze_proxy" parent="rmProxyAction" >
      <property name="target">
         <ref bean="unfreeze"/>
      </property>
      <property name="interceptorNames">
         <list>
            <idref bean="unfreeze_security"/>
         </list>
      </property>
   </bean>

   <bean id="unfreeze_security" parent="actionSecurity">
      <property name="objectDefinitionSource">
         <value>
            org.alfresco.module.org_alfresco_module_rm.action.RecordsManagementAction.execute=RM_CAP.0.rma:filePlanComponent.Unfreeze
            org.alfresco.module.org_alfresco_module_rm.action.RecordsManagementAction.*=RM_ALLOW
            org.alfresco.repo.action.executer.ActionExecuter.*=RM_ALLOW
         </value>
      </property>
   </bean>

   <bean id="unfreeze" class="org.alfresco.module.org_alfresco_module_rm.action.impl.UnfreezeAction" parent="rmAction">
      <property name="publicAction" value="false"/>
      <property name="auditable" value="false"/>
   </bean>

   <!-- Relinquish Hold Action-->

   <bean id="relinquishHold_proxy" parent="rmProxyAction" >
      <property name="target">
         <ref bean="relinquishHold"/>
      </property>
      <property name="interceptorNames">
         <list>
            <idref bean="unfreeze_security"/>
         </list>
      </property>
   </bean>

   <bean id="relinquishHold" class="org.alfresco.module.org_alfresco_module_rm.action.impl.RelinquishHoldAction" parent="rmAction">
       <property name="publicAction" value="false"/>
      <property name="auditable" value="false"/>
       <property name="auditedImmediately" value="true"/>
   </bean>

   <!-- Edit hold reason -->

   <bean id="editHoldReason_proxy" parent="rmProxyAction" >
      <property name="target">
         <ref bean="editHoldReason"/>
      </property>
      <property name="interceptorNames">
         <list>
            <idref bean="editHoldReason_security"/>
         </list>
      </property>
   </bean>

   <bean id="editHoldReason_security" parent="actionSecurity">
      <property name="objectDefinitionSource">
         <value>
            org.alfresco.module.org_alfresco_module_rm.action.RecordsManagementAction.execute=RM_CAP.0.rma:filePlanComponent.ViewUpdateReasonsForFreeze
            org.alfresco.module.org_alfresco_module_rm.action.RecordsManagementAction.*=RM_ALLOW
            org.alfresco.repo.action.executer.ActionExecuter.*=RM_ALLOW
         </value>
      </property>
   </bean>

   <bean id="editHoldReason" class="org.alfresco.module.org_alfresco_module_rm.action.impl.EditHoldReasonAction" parent="rmAction">
       <property name="publicAction" value="false"/>
       <property name="auditable" value="false"/>
   </bean>

</beans>