<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE beans PUBLIC '-//SPRING//DTD BEAN//EN' 'http://www.springframework.org/dtd/spring-beans.dtd'>

<beans>
    
    <bean id="rmViewRecordsCapability" 
    	  parent="rmBaseCapability" 
    	  class="org.alfresco.module.org_alfresco_module_rm.capability.impl.ViewRecordsCapability">
    	<property name="name" value="ViewRecords" />
	</bean>
    
    <bean id="rmUndeclareRecordsCapability" 
    	  parent="declarativeCapability">
   		<property name="name" value="UndeclareRecords"/>
   		<property name="permission" value="UndeclareRecords"/>   		
		<property name="kinds">
			<list>
				<value>RECORD</value>
			</list>
		</property>	
   		<property name="conditions">
   			<map>
   				<entry key="capabilityCondition.filling" value="true"/>
   				<entry key="capabilityCondition.frozen" value="false"/>   				
   				<entry key="capabilityCondition.declared" value="true"/>
   				<entry key="capabilityCondition.cutoff" value="false"/>
   			</map>
   		</property>
    </bean>
    
    <bean id="rmCreateModifyRecordsInCuttoffFoldersCapability" 
    	  parent="declarativeCapability">
   		<property name="name" value="CreateModifyRecordsInCutoffFolders"/>
   		<property name="permission" value="CreateModifyRecordsInCutoffFolders"/>   		
		<property name="kinds">
			<list>
				<value>RECORD_FOLDER</value>
				<value>RECORD</value>
			</list>
		</property>	
   		<property name="conditions">
   			<map>
   				<entry key="capabilityCondition.filling" value="true"/>
   				<entry key="capabilityCondition.cutoff" value="true"/>
   				<entry key="capabilityCondition.frozen" value="false"/>   				
   				<entry key="capabilityCondition.closed" value="false"/>
   			</map>
   		</property>
    </bean>
    
    <bean id="rmFileCapability"
          parent="declarativeCapability">
    	<property name="name" value="File"/>
    	<property name="private" value="true"/>
    	<property name="conditions">
    		<map>
    			<entry key="capabilityCondition.filling" value="true"/>
            	<entry key="capabilityCondition.frozen" value="false"/> 
            	<entry key="capabilityCondition.cutoff" value="false"/>  
            	<entry key="capabilityCondition.closed" value="false"/>  
            	<entry key="capabilityCondition.declared" value="false"/>
    		</map>
    	</property>
    </bean>
    
    <bean id="rmFileRecordsCapability" 
    	  parent="compositeCapability">
		<property name="name" value="FileRecords" />
		<property name="capabilities">
			<list>
				<ref bean="rmFileCapability"/>				
				<ref bean="rmCreateModifyRecordsInCuttoffFoldersCapability"/>	
			</list>
		</property>	
	</bean>
	
	<bean id="rmFileToRecordsCapability"
	      parent="declarativeCapability">
		<property name="name" value="FileToRecords"/>
		<property name="private" value="true" />		
    	<property name="conditions">
    		<map>
    			<entry key="capabilityCondition.frozen" value="false"/>
    		</map>
    	</property>
    	<property name="targetCapability" ref="rmFileRecordsCapability" />
	</bean>

    <bean id="rmDeclareRecordsCapability" 
    	  parent="declarativeCapability">
   		<property name="name" value="DeclareRecords"/>
   		<property name="permission" value="DeclareRecords"/>   		
		<property name="kinds">
			<list>
				<value>RECORD</value>
			</list>
		</property>	
   		<property name="conditions">
   			<map>
   				<entry key="capabilityCondition.filling" value="true"/>
   				<entry key="capabilityCondition.cutoff" value="false"/>
   				<entry key="capabilityCondition.frozen" value="false"/>   				   				
   				<entry key="capabilityCondition.declared" value="false"/>
   			</map>
   		</property>
    </bean>
        
    <bean id="rmDeclareRecordsInClosedFoldersCapability"  
    	  parent="declarativeCapability">
   		<property name="name" value="DeclareRecordsInClosedFolders"/>
   		<property name="permission" value="DeclareRecordsInClosedFolders"/>   		
		<property name="kinds">
			<list>
				<value>RECORD</value>
			</list>
		</property>	
   		<property name="conditions">
   			<map>
   				<entry key="capabilityCondition.filling" value="true"/>
   				<entry key="capabilityCondition.cutoff" value="false"/>
   				<entry key="capabilityCondition.frozen" value="false"/>   				
   				<entry key="capabilityCondition.closed" value="true"/>   				   				
   				<entry key="capabilityCondition.declared" value="false"/>
   			</map>
   		</property>
    </bean>
    
    <bean id="rmDeleteRecordsCapability"   
    	  parent="declarativeCapability">
   		<property name="name" value="DeleteRecords"/>
   		<property name="permission" value="DeleteRecords"/>   		
		<property name="kinds">
			<list>			    
				<value>RECORD</value>
			</list>
		</property>	
   		<property name="conditions">
   			<map>
   				<entry key="capabilityCondition.frozen" value="false"/>   				   				
   			</map>
   		</property>
    </bean> 
    
    <bean id="rmEditDeclaredRecordMetadataCapability" 
    	  parent="declarativeCapability">
   		<property name="name" value="EditDeclaredRecordMetadata"/>
   		<property name="permission" value="EditDeclaredRecordMetadata"/>   		
		<property name="kinds">
			<list>
				<value>RECORD</value>
			</list>
		</property>	
   		<property name="conditions">
   			<map>
   				<entry key="capabilityCondition.filling" value="true"/>
   				<entry key="capabilityCondition.cutoff" value="false"/>
   				<entry key="capabilityCondition.frozen" value="false"/>   				  				   				
   				<entry key="capabilityCondition.declared" value="true"/>
   			</map>
   		</property>
    </bean>    
    
    <!--  TODO .. this is being used for the wrong thing! ... should indicate that the use can edit the non-record meta-data of a record -->
    <!--  TODO .. may need some kind of 'prep' record capability you get with file? .. I think this is what this is being used for atm -->
    <bean id="rmEditNonRecordMetadataCapability" 
    	  parent="declarativeCapability"
          class="org.alfresco.module.org_alfresco_module_rm.capability.impl.EditCapability">
   		<property name="name" value="EditNonRecordMetadata"/>
   		<property name="permission" value="EditNonRecordMetadata"/>   		
   		<property name="conditions">
   			<map>
   				<entry key="capabilityCondition.fileable" value="true"/>   				
   				<entry key="capabilityCondition.frozen" value="false"/>   				   				
   			</map>
   		</property>
    </bean> 
    
    <bean id="rmEditRecordMetadataCapability"
          parent="rmBaseCapability" 
          class="org.alfresco.module.org_alfresco_module_rm.capability.impl.EditCapability">
   		<property name="name" value="EditRecordMetadata"/>
   		<property name="permission" value="EditRecordMetadata"/>  
		<property name="kinds">
			<list>
				<value>RECORD</value>
			</list>
		</property>	
   		<property name="conditions">
   			<map>
   				<entry key="capabilityCondition.filling" value="true"/>
   				<entry key="capabilityCondition.cutoff" value="false"/>
   				<entry key="capabilityCondition.frozen" value="false"/>   				
   				<entry key="capabilityCondition.closed" value="false"/>   				   				
   				<entry key="capabilityCondition.declared" value="false"/>
   			</map>
   		</property>
    </bean> 
    
    <bean id="rmMoveRecordsCapability" 
          parent="declarativeCapability" >
		<property name="name" value="MoveRecords" />	
		<property name="permission" value="MoveRecords"/>	
		<property name="undetermined" value="true" />
		<property name="kind" value="RECORD" />	
   		<property name="conditions">
   			<map>
   				<entry key="capabilityCondition.frozen" value="false"/>   	
   				<!--  Do we care if it's cutoff or not? -->			   				
   			</map>
   		</property>
   		<property name="targetCapability" ref="rmFileRecordsCapability"/>
	</bean>
	
    <bean id="rmUpgradeDowngradeAndDeclassifyRecordsCapability" 
    	  parent="declarativeCapability">
   		<property name="name" value="UpgradeDowngradeAndDeclassifyRecords"/>
   		<property name="permission" value="UpgradeDowngradeAndDeclassifyRecords"/>   		
   		<property name="conditions">
   			<map>
   				<entry key="capabilityCondition.frozen" value="false"/>
   			</map>
   		</property>
    </bean>    
    
    <bean id="rmReOpenFoldersCapability" 
    	  parent="declarativeCapability">
   		<property name="name" value="ReOpenFolders"/>
   		<property name="permission" value="ReOpenFolders"/>   		
		<property name="kinds">
			<list>
				<value>RECORD_FOLDER</value>
			</list>
		</property>	
   		<property name="conditions">
   			<map>
   				<entry key="capabilityCondition.filling" value="true"/>
   				<entry key="capabilityCondition.cutoff" value="false"/>
   				<entry key="capabilityCondition.frozenOrFrozenChildren" value="false"/>   				
   				<entry key="capabilityCondition.closed" value="true"/>
   			</map>
   		</property>
    </bean>

</beans>